@page "/"
@using HowClient.Infrastructure.DTO.Public.Event
@using HowClient.Services.Public.Event
@using Microsoft.AspNetCore.Components.Authorization

@inject IEventService _EventService

<PageTitle>Home</PageTitle>

<AuthorizeView>
    <Authorized>
        <h1>Hello @UserName !!</h1>
        <p>Welcome to your new app.</p>
        <p>Welcome to Blazor Learner.</p>
    </Authorized>
    <Authorizing>
        <h1>Loading ...</h1>
    </Authorizing>
</AuthorizeView>

<div>Hello user</div>

<button class="btn btn-primary" @onclick="LoadEvents">Click me</button>

@code{
    string? UserName { get; set; }

    [CascadingParameter]
    Task<AuthenticationState>? AuthenticationState { get; set; }

    private GetEventsPaginationPublicResponseDTO Events = new ();

    protected override async Task OnInitializedAsync()
    {
        if (AuthenticationState is not null)
        {
            var authState = await AuthenticationState;
            var user = authState?.User;

            if (user?.Identity is not null && user.Identity.IsAuthenticated)
            {
                UserName = user.Identity.Name;
            }
        }

        
    }

    private async Task LoadEvents()
    {
        var result = await _EventService.GetEventsPagination();
        
        Console.WriteLine("uu");
    }
}